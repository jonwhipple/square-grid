<!DOCTYPE html>
<html lang="en">
    <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8" />
    <title>Proportional Square Grid</title>
    <style>
        :root {
          /* Set this value to the number of columns you desire for your layout  */
          --number-of-columns: 12;

          /* --gap-unit value is OPTIONAL; higher numbers = smaller gaps */
          --gap-unit: calc(var(--base-unit) / 10);

          /* NO OTHER VALUES NEED TO BE SET */

          --number-of-column-gaps: calc(var(--number-of-columns) - 1);
          --gap-ratio-unit: calc(var(--number-of-columns) / var(--number-of-column-gaps));
          --base-unit: calc(100% / var(--number-of-columns));
          --column-width: calc(var(--base-unit) - var(--gap-unit)); 
          --row-height: var(--column-width);
        }

        body {
          margin: 0;
        }

        .layout {
            display: grid;
            grid-template-columns: repeat(var(--number-of-columns), var(--column-width));
            grid-auto-rows: var(--row-height);
            gap: calc(var(--gap-unit) * var(--gap-ratio-unit));
            aspect-ratio: 1 / 1;
        }

        .tile {
            background-color: tan;
        }
    </style>
</head>
<body>
    <div class="layout">
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
        <div class="tile">tile</div>
    </div>
</body>
